# –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è Supabase API

## üìã –ß—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å

- **–°–µ—Ä–≤–µ—Ä:** 89.104.74.121 (Ubuntu 24.04 LTS)
- **–õ–æ–≥–∏–Ω:** root
- **–ü–∞—Ä–æ–ª—å:** MpllODphydCZYstt
- **–î–æ–º–µ–Ω:** api.syndicate-poker.ru
- **Supabase Project ID:** mokhssmnorrhohrowxvu
- **–¶–µ–ª–µ–≤–æ–π URL:** mokhssmnorrhohrowxvu.supabase.co

## üéØ –¶–µ–ª—å

–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Ö–æ–¥–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ Supabase —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω api.syndicate-poker.ru

---

## –ß–ê–°–¢–¨ 1: –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE

### –®–∞–≥ 1.1: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard: https://supabase.com/dashboard/project/mokhssmnorrhohrowxvu/settings/api
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API** ‚Üí **Custom Domains**
3. –ù–∞–∂–º–∏—Ç–µ **Add Custom Domain**
4. –í–≤–µ–¥–∏—Ç–µ: `api.syndicate-poker.ru`
5. Supabase –ø–æ–∫–∞–∂–µ—Ç DNS –∑–∞–ø–∏—Å–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å (TXT –∏ CNAME)
6. **–ù–ï –ó–ê–ö–†–´–í–ê–ô–¢–ï –≠–¢–£ –°–¢–†–ê–ù–ò–¶–£** - –¥–∞–Ω–Ω—ã–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è

### –®–∞–≥ 1.2: –ß—Ç–æ Supabase –ø–æ–∫–∞–∂–µ—Ç (–ø—Ä–∏–º–µ—Ä–Ω–æ):

```
–î–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ DNS –∑–∞–ø–∏—Å–∏:

TXT: _acme-challenge.api ‚Üí [—Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏]
CNAME: api ‚Üí mokhssmnorrhohrowxvu.supabase.co
```

**–í–ê–ñ–ù–û:** –ú—ã –ù–ï –±—É–¥–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å CNAME, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º A-–∑–∞–ø–∏—Å—å –Ω–∞ –Ω–∞—à –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä!

---

## –ß–ê–°–¢–¨ 2: –ù–ê–°–¢–†–û–ô–ö–ê DNS

### –®–∞–≥ 2.1: –í—Ö–æ–¥ –≤ –ø–∞–Ω–µ–ª—å DNS

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://dnsadmin.hosting.reg.ru/manager/ispmgr
2. –õ–æ–≥–∏–Ω: `ce113322055`
3. –ü–∞—Ä–æ–ª—å: `omt5_y9DEq!p0Sl`

### –®–∞–≥ 2.2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS –∑–∞–ø–∏—Å–µ–π

#### –£–¥–∞–ª–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é CNAME –∑–∞–ø–∏—Å—å (–µ—Å–ª–∏ –µ—Å—Ç—å):
- –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø–∏—Å—å: `CNAME api ‚Üí mokhssmnorrhohrowxvu.supabase.co`
- –£–¥–∞–ª–∏—Ç–µ –µ—ë (–∏–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã)

#### –î–æ–±–∞–≤–∏—Ç—å A-–∑–∞–ø–∏—Å—å:
1. –ù–∞–∂–º–∏—Ç–µ **"+ –î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"**
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **–¢–∏–ø –∑–∞–ø–∏—Å–∏:** A
   - **–ò–º—è:** api
   - **IP-–∞–¥—Ä–µ—Å:** 89.104.74.121
   - **TTL:** 300 (–∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π)
3. –ù–∞–∂–º–∏—Ç–µ **–°–æ—Ö—Ä–∞–Ω–∏—Ç—å**

#### –°–æ—Ö—Ä–∞–Ω–∏—Ç—å TXT –∑–∞–ø–∏—Å—å –¥–ª—è SSL (—É–∂–µ –µ—Å—Ç—å):
- –ó–∞–ø–∏—Å—å `_acme-challenge` –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞—Ç—å—Å—è –∫–∞–∫ –µ—Å—Ç—å
- –û–Ω–∞ –Ω—É–∂–Ω–∞ –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

### –®–∞–≥ 2.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS (–≤—ã–ø–æ–ª–Ω–∏—Ç—å —á–µ—Ä–µ–∑ 5-10 –º–∏–Ω—É—Ç)

–ù–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# Windows (PowerShell –∏–ª–∏ CMD)
nslookup api.syndicate-poker.ru

# Mac/Linux
dig api.syndicate-poker.ru

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è IP: 89.104.74.121
```

–ï—Å–ª–∏ DNS –µ—â–µ –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 30 –º–∏–Ω—É—Ç.

---

## –ß–ê–°–¢–¨ 3: –ù–ê–°–¢–†–û–ô–ö–ê –°–ï–†–í–ï–†–ê

### –®–∞–≥ 3.1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

–û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Ä–º–∏–Ω–∞–ª (–∏–ª–∏ PuTTY –Ω–∞ Windows) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
ssh root@89.104.74.121
# –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å: MpllODphydCZYstt
```

### –®–∞–≥ 3.2: –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

```bash
passwd
# –í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–≤–∞ —Ä–∞–∑–∞
```

### –®–∞–≥ 3.3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
apt update && apt upgrade -y
```

### –®–∞–≥ 3.4: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Nginx
apt install nginx -y

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
nginx -v

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: nginx version: nginx/1.24.x
```

### –®–∞–≥ 3.5: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot –¥–ª—è SSL

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Certbot
apt install certbot python3-certbot-nginx -y

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
certbot --version
```

### –®–∞–≥ 3.6: –°–æ–∑–¥–∞–Ω–∏–µ –í–†–ï–ú–ï–ù–ù–û–ô –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx (–±–µ–∑ SSL)

```bash
# –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
nano /etc/nginx/sites-available/api.syndicate-poker.ru
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â—É—é **–í–†–ï–ú–ï–ù–ù–£–Æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (–±–µ–∑ SSL):

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name api.syndicate-poker.ru;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/supabase-proxy-access.log;
    error_log /var/log/nginx/supabase-proxy-error.log;

    # –¢–∞–π–º–∞—É—Ç—ã
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    send_timeout 600s;

    # –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
    client_max_body_size 50M;

    # –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ Supabase
    location / {
        proxy_pass https://mokhssmnorrhohrowxvu.supabase.co;
        
        proxy_set_header Host mokhssmnorrhohrowxvu.supabase.co;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        
        # CORS
        add_header 'Access-Control-Allow-Origin' '*' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, PATCH, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'authorization, x-client-info, apikey, content-type, range, x-supabase-api-version' always;
        add_header 'Access-Control-Expose-Headers' 'Content-Range, X-Supabase-Api-Version' always;
        add_header 'Access-Control-Max-Age' '86400' always;

        if ($request_method = 'OPTIONS') {
            return 204;
        }

        # WebSocket –¥–ª—è Realtime
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_buffering off;
        proxy_redirect off;
    }
}
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ nano:**
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + X`
- –ù–∞–∂–º–∏—Ç–µ `Y` (Yes)
- –ù–∞–∂–º–∏—Ç–µ `Enter`

### –®–∞–≥ 3.7: –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫
ln -s /etc/nginx/sites-available/api.syndicate-poker.ru /etc/nginx/sites-enabled/

# –£–¥–∞–ª—è–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –µ—Å—Ç—å)
rm -f /etc/nginx/sites-enabled/default

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: 
# nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
# nginx: configuration file /etc/nginx/nginx.conf test is successful

# –ó–∞–ø—É—Å–∫–∞–µ–º Nginx
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status nginx
```

### –®–∞–≥ 3.8: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

```bash
# –ü–æ–ª—É—á–∞–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (Nginx –£–ñ–ï –∑–∞–ø—É—â–µ–Ω)
certbot certonly --nginx -d api.syndicate-poker.ru

# Certbot —Å–ø—Ä–æ—Å–∏—Ç:
# 1. Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π - –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à email
# 2. –°–æ–≥–ª–∞—Å–∏—Ç—å—Å—è —Å Terms of Service - –≤–≤–µ–¥–∏—Ç–µ Y
# 3. –ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ - –≤–≤–µ–¥–∏—Ç–µ N –∏–ª–∏ Y (–Ω–∞ –≤—ã–±–æ—Ä)
```

### –®–∞–≥ 3.9: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å SSL

```bash
# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nano /etc/nginx/sites-available/api.syndicate-poker.ru
```

–ó–∞–º–µ–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ **–§–ò–ù–ê–õ–¨–ù–£–Æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å SSL**:

```nginx
server {
    listen 80;
    listen [::]:80;
    server_name api.syndicate-poker.ru;

    # –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS
    location / {
        return 301 https://$server_name$request_uri;
    }
}

server {
    listen 443 ssl http2;
    listen [::]:443 ssl http2;
    server_name api.syndicate-poker.ru;

    # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
    ssl_certificate /etc/letsencrypt/live/api.syndicate-poker.ru/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/api.syndicate-poker.ru/privkey.pem;
    ssl_trusted_certificate /etc/letsencrypt/live/api.syndicate-poker.ru/chain.pem;

    # SSL –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;

    # –õ–æ–≥–∏
    access_log /var/log/nginx/supabase-proxy-access.log;
    error_log /var/log/nginx/supabase-proxy-error.log;

    # –¢–∞–π–º–∞—É—Ç—ã
    proxy_connect_timeout 600s;
    proxy_send_timeout 600s;
    proxy_read_timeout 600s;
    send_timeout 600s;

    # –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤
    client_max_body_size 50M;

    # –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ Supabase
    location / {
        proxy_pass https://mokhssmnorrhohrowxvu.supabase.co;
        
        proxy_set_header Host mokhssmnorrhohrowxvu.supabase.co;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_set_header X-Forwarded-Host $host;
        
        # CORS
        add_header 'Access-Control-Allow-Origin' '*' always;
        add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, PATCH, OPTIONS' always;
        add_header 'Access-Control-Allow-Headers' 'authorization, x-client-info, apikey, content-type, range, x-supabase-api-version' always;
        add_header 'Access-Control-Expose-Headers' 'Content-Range, X-Supabase-Api-Version' always;
        add_header 'Access-Control-Max-Age' '86400' always;

        if ($request_method = 'OPTIONS') {
            return 204;
        }

        # WebSocket –¥–ª—è Realtime
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_buffering off;
        proxy_redirect off;
    }
}
```

**–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ nano:**
- –ù–∞–∂–º–∏—Ç–µ `Ctrl + X`
- –ù–∞–∂–º–∏—Ç–µ `Y` (Yes)
- –ù–∞–∂–º–∏—Ç–µ `Enter`

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º Nginx
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
systemctl status nginx
```

### –®–∞–≥ 3.10: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UFW
apt install ufw -y

# –†–∞–∑—Ä–µ—à–∞–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ—Ä—Ç—ã
ufw allow 22/tcp    # SSH
ufw allow 80/tcp    # HTTP
ufw allow 443/tcp   # HTTPS

# –í–∫–ª—é—á–∞–µ–º firewall
ufw enable

# –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ: y

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å
ufw status
```

### –®–∞–≥ 3.11: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SSL

```bash
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
certbot renew --dry-run

# –ï—Å–ª–∏ –≤—Å—ë –û–ö, –≤—ã–≤–µ–¥–µ—Ç—Å—è:
# Congratulations, all simulated renewals succeeded
```

---

## –ß–ê–°–¢–¨ 4: –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´

### –®–∞–≥ 4.1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
curl -I https://api.syndicate-poker.ru

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: HTTP/2 200 –∏–ª–∏ 308
```

### –®–∞–≥ 4.2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –°–º–æ—Ç—Ä–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—à–∏–±–∫–∏
tail -50 /var/log/nginx/supabase-proxy-error.log

# –°–º–æ—Ç—Ä–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã
tail -50 /var/log/nginx/supabase-proxy-access.log

# –°–ª–µ–¥–∏–º –∑–∞ –ª–æ–≥–∞–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/log/nginx/supabase-proxy-access.log
# Ctrl+C –¥–ª—è –≤—ã—Ö–æ–¥–∞
```

### –®–∞–≥ 4.3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: https://syndicate-poker.ru
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Network
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç –Ω–∞ `api.syndicate-poker.ru`
6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### –®–∞–≥ 4.4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Supabase API

```bash
# –° –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
curl https://api.syndicate-poker.ru/rest/v1/

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å –æ—à–∏–±–∫—É 401 (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, API —Ç—Ä–µ–±—É–µ—Ç –∫–ª—é—á)
```

---

## –ß–ê–°–¢–¨ 5: –§–ò–ù–ê–õ–¨–ù–ê–Ø –ù–ê–°–¢–†–û–ô–ö–ê SUPABASE

### –®–∞–≥ 5.1: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API** ‚Üí **Custom Domains**
3. –ù–∞–π–¥–∏—Ç–µ `api.syndicate-poker.ru`
4. –ù–∞–∂–º–∏—Ç–µ **Verify** –∏–ª–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ **Active** (–º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –¥–æ 10 –º–∏–Ω—É—Ç)

---

## üéâ –ì–û–¢–û–í–û!

–¢–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Supabase API —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω.

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

```
–ö–ª–∏–µ–Ω—Ç (–±—Ä–∞—É–∑–µ—Ä)
    ‚Üì
https://api.syndicate-poker.ru
    ‚Üì
Nginx –Ω–∞ VPS (89.104.74.121)
    ‚Üì
https://mokhssmnorrhohrowxvu.supabase.co
    ‚Üì
Supabase API
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –ò –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–ï

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
# –°—Ç–∞—Ç—É—Å Nginx
systemctl status nginx

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ Nginx
systemctl restart nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f /var/log/nginx/supabase-proxy-error.log
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

```bash
# –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 60 –¥–Ω–µ–π
# –î–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
certbot renew

# –î–ª—è —Ç–µ—Å—Ç–∞:
certbot renew --dry-run
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

```bash
# –†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É (—Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é):
apt update && apt upgrade -y
```

---

## üö® –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú

### –û—à–∏–±–∫–∞ 502 Bad Gateway

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Supabase
curl -I https://mokhssmnorrhohrowxvu.supabase.co

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -100 /var/log/nginx/supabase-proxy-error.log

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx
systemctl restart nginx
```

### –û—à–∏–±–∫–∞ SSL

```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
systemctl stop nginx
certbot delete --cert-name api.syndicate-poker.ru
certbot certonly --standalone -d api.syndicate-poker.ru
systemctl start nginx
```

### DNS –Ω–µ –æ–±–Ω–æ–≤–∏–ª—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DNS
nslookup api.syndicate-poker.ru

# –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ä—ã–π IP, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –¥–æ 24 —á–∞—Å–æ–≤
# –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É reg.ru
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Nginx
systemctl status nginx

# 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall
ufw status

# 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
tail -100 /var/log/nginx/supabase-proxy-error.log

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
nginx -t
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —à–∞–≥–∏:

1. **–°–º–µ–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å root**
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   ```bash
   adduser admin
   usermod -aG sudo admin
   ```
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSH –∫–ª—é—á–∏** –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª–µ–π
4. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ fail2ban:**
   ```bash
   apt install fail2ban -y
   systemctl enable fail2ban
   ```

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

### –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ö–æ—Å—Ç–∏–Ω–≥-–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:

- **DNS –ø–∞–Ω–µ–ª—å:** https://dnsadmin.hosting.reg.ru/manager/ispmgr
- **–õ–æ–≥–∏–Ω DNS:** ce113322055
- **–ü–∞—Ä–æ–ª—å DNS:** omt5_y9DEq!p0Sl

### –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–æ–≥–æ–≤:

```bash
# Nginx access logs
tail -f /var/log/nginx/supabase-proxy-access.log

# Nginx error logs
tail -f /var/log/nginx/supabase-proxy-error.log

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏ Nginx
journalctl -u nginx -f

# SSL logs
journalctl -u certbot -f
```

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–û–í–ï–†–ö–ò

- [ ] DNS A-–∑–∞–ø–∏—Å—å —Å–æ–∑–¥–∞–Ω–∞ (api ‚Üí 89.104.74.121)
- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –ø–æ–ª—É—á–µ–Ω
- [ ] Firewall –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] –ü—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (curl test)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ
- [ ] –ö–∞—Å—Ç–æ–º–Ω—ã–π –¥–æ–º–µ–Ω Active –≤ Supabase
- [ ] –ü–∞—Ä–æ–ª—å root –∏–∑–º–µ–Ω–µ–Ω
- [ ] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ SSL —Ä–∞–±–æ—Ç–∞–µ—Ç
